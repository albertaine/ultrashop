!function(){"use strict";angular.module("ultrashop.Config",[]).constant("AppConfig",{root_state:"main"}).run(["$log",function(o){o.debug("ultrashop.Config.run")}])}(),function(){"use strict";angular.module("ultrashopApp",["ui.bootstrap","ui.router","ultrashop.Firebase","ultrashop.Auth","ultrashop.Sign","ultrashop.Config","ultrashop.NavBar","ultrashop.Catalog","ultrashop.Vacancies"]).config(["$urlRouterProvider","$stateProvider","$logProvider",function(o,e,t,n){t.debugEnabled(!0),o.when("","/"),o.otherwise("/")}]).run(["$rootScope","$state","$stateParams","$log",function(o,e,t,n){n.debug("ultrashopApp.run"),o.$state=e,o.$stateParams=t,o.currentUser={fullName:null}}])}(),function(){"use strict";function o(o,e,t,n,r,a){var i={},s=o.getRef(),u=e(s),l=s.child("users");return i.auth=function(o){return console.log("=== auth ==="),u.$authWithPassword(o)},i.checkAuth=function(){},i.onAuth=function(){console.log("=== onAuth ==="),u.$onAuth(function(o){if(o){t.userLoggedIn=!0;var e=n(l.child(o.uid));e.$loaded(function(o){t.currentUser.fullName=o.fullname,t.currentUser.id=o.$id}),console.log("=== onAuth === Logged in as ",o.uid)}else t.userLoggedIn=!1,t.currentUser.fullname=null,t.currentUser.id=null,console.log("Not logged in")})},i.onAuth(),i.require=function(){return u.$requireAuth()},i.loginUser=function(o){return a.debug("Auth user: "+o.email+", "+o.password),u.$authWithPassword({email:o.email,password:o.password})},i.isUserLoggedIn=function(){return u.$getAuth()?!0:!1},i.registerUser=function(o){return console.log("=== registerUser === "+o.email+", "+o.password),u.$createUser({email:o.email,password:o.password}).then(function(e){return console.log("User registered with id = "+e.uid),l.child(e.uid).set({fullname:o.fullname||"Dear Friend",email:o.email,regDate:Firebase.ServerValue.TIMESTAMP}),u.$authWithPassword({email:o.email,password:o.password})}).then(function(o){console.log("=== authObj.createUser === Logged in as "+o.uid)})["catch"](function(o){console.error("Authentication failed "+o)})},i.logOut=function(){u.$unauth(),r.go("main.catalog")},i.facebookSignUp=function(){return u.$authWithOAuthPopup("facebook").then(function(o){l.child(o.uid).set({fullname:o.facebook.displayName,email:null,facebookId:o.facebook.id,avatar:o.facebook.profileImageURL,regDate:Firebase.ServerValue.TIMESTAMP}),console.log("Facebook sign up ",o)})},i.facebookSignIn=function(){return u.$authWithOAuthPopup("facebook",function(o,e){},{remember:"sessionOnly"})},i}angular.module("ultrashop.Auth",["ultrashop.Firebase"]).factory("AuthFct",o),o.$inject=["dbc","$firebaseAuth","$rootScope","$firebaseObject","$state","$log"]}(),function(){"use strict";function o(o,e){function t(){n.user={email:null,password:null,fullname:null}}var n=this;t(),n.facebookSignUp=function(){o.facebookSignUp().then(function(o){e.go("main.catalog")})},n.signUp=function(){o.registerUser(n.user).then(function(o){t(),e.go("main.catalog")})}}function e(o,e,t){function n(){r.user={email:null,password:null,fullname:null}}var r=this;n(),r.facebookSignIn=function(){o.facebookSignIn().then(function(o){e.go("main.catalog")})},r.signIn=function(){o.loginUser(r.user).then(function(o){n(),e.go("main.catalog")})["catch"](function(o){switch(o.code){case"INVALID_EMAIL":console.log("INVALID_EMAIL: The specified user account email is invalid.");break;case"INVALID_PASSWORD":console.log("INVALID_PASSWORD: The specified user account password is incorrect.");break;case"INVALID_USER":console.log("INVALID_USER: The specified user account does not exist.");break;default:console.log("COMMON ERROR: Error logging user in: ",o)}e.go("main.signin")})}}function t(o,e,t,n,r){function i(){s.user={email:null,password:null,fullname:null}}var s=this;i(),t.showForm=function(){t.message="Show Form Button Clicked",r.debug(t.message);var o=n.open({templateUrl:"components/_auth/views/modal-form.html",controller:a,windowClass:"center-modal",scope:t,resolve:{userForm:function(){return t.userForm}}});o.result.then(function(o){t.selected=o,s.user.email=t.selected.email,s.user.password=t.selected.password,s.signIn()},function(){r.info("Modal dismissed at: "+new Date)})},s.facebookSignIn=function(){o.facebookSignIn().then(function(o){e.go("main.catalog")})},s.signIn=function(){o.loginUser(s.user).then(function(o){i(),e.go("main.catalog")})["catch"](function(o){switch(o.code){case"INVALID_EMAIL":console.log("INVALID_EMAIL: The specified user account email is invalid.");break;case"INVALID_PASSWORD":console.log("INVALID_PASSWORD: The specified user account password is incorrect.");break;case"INVALID_USER":console.log("INVALID_USER: The specified user account does not exist.");break;default:console.log("COMMON ERROR: Error logging user in: ",o)}e.go("main.signin")})}}function n(o,e,t){e.logOut=function(){t.debug("logOut"),o.logOut()}}function r(o,e){o.state(e.root_state+".signin",{url:"^/signin",templateUrl:"components/_auth/views/sign-in.html",controller:"signInCtrl",controllerAs:"sic"}).state(e.root_state+".signup",{url:"^/signup",templateUrl:"components/_auth/views/sign-up.html",controller:"signUpCtrl",controllerAs:"suc"})}angular.module("ultrashop.Sign",["ultrashop.Config","ultrashop.Auth","ui.router"]).controller("signInCtrl",e).controller("modalSignInCtrl",t).controller("signUpCtrl",o).controller("signOutCtrl",n).config(r),o.$inject=["AuthFct","$state"],e.$inject=["AuthFct","$state","$rootScope"],t.$inject=["AuthFct","$state","$scope","$uibModal","$log"];var a=function(o,e,t,n,r){function a(){o.user={email:null,password:null}}a(),o.form={},o.submitForm=function(){o.form.userForm.$valid?t.close({email:o.user.email,password:o.user.password}):console.log("userform is not in scope")},o.cancel=function(){t.dismiss("cancel")},o.facebookLogin=function(){t.dismiss("cancel"),r.facebookSignIn().then(function(o){e.go("main.catalog")})}};a.$inject=["$scope","$state","$uibModalInstance","userForm","AuthFct"],n.$inject=["AuthFct","$scope","$log"],r.$inject=["$stateProvider","AppConfig"]}(),function(){"use strict";angular.module("ultrashop.Vacancies",["ui.bootstrap","ui.router"]).run(["$log",function(o){o.debug("ultrashop.Vacancies.run")}]).config(["$urlRouterProvider","$stateProvider","AppConfig",function(o,e,t){o.when("/","/vacancies"),e.state(t.root_state+".vacancies",{url:"^/vacancies",controller:"VacanciesCtrl",templateUrl:"components/about/vacancies/main.html"})}]).controller("VacanciesCtrl",["$scope","$state","AppConfig","$log",function(o,e,t,n){n.debug("ultrashop.Vacancies.controller")}])}(),function(){"use strict";angular.module("ultrashop.Catalog",["ui.bootstrap","ui.router"]).run(["$log",function(o){o.debug("ultrashop.Catalog.run")}]).config(["$urlRouterProvider","$stateProvider","AppConfig",function(o,e,t){o.when("/","/catalog"),e.state(t.root_state+".catalog",{url:"^/catalog",controller:"CatalogCtrl",templateUrl:"components/catalog/views/main.html"})}]).controller("CatalogCtrl",["$scope","$state","AppConfig","$log",function(o,e,t,n){n.debug("ultrashop.Catalog.controller",o.model)}])}(),function(){"use strict";function o(o,e){var t={},n=new Firebase(o);return t.getRef=function(){return n},t}angular.module("ultrashop.Firebase",["firebase"]).constant("FIREBASE_URL","https://ultrashop.firebaseio.com/").factory("dbc",o),o.$inject=["FIREBASE_URL","$firebaseAuth"]}(),function(){"use strict";angular.module("ultrashop.NavBar",["ui.bootstrap","ui.router"]).run(["$log",function(o){}]).config(["$urlRouterProvider","$stateProvider","AppConfig",function(o,e,t){o.when("/","/catalog"),e.state(t.root_state,{url:"/",controller:"NavBarCtrl",templateUrl:"components/navbar/main.html"})}]).controller("NavBarCtrl",["$scope","$state","AppConfig","$log",function(o,e,t,n){o.model={state:t.root_state}}])}();